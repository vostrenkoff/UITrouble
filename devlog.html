<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | PointAndClickIMT_S</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .header {
            background-color: #f1f1f1;
            padding: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .pdf-container {
            flex-grow: 1; 
            height: 100%;
            overflow: auto;
            text-align: center;
        }
        canvas {
            display: block;
            margin: 0 auto;
        }
        .controls {
            margin-top: 10px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
</head>
<body>
  <div class="header">
    <h1>PointAndClickIMTS</h1>
    <button onclick="window.location.href='index.html'">Home</button>
    <button onclick="window.location.href='devlog.html'">Dev Log</button>
  </div>

  <div class="pdf-container">
    <canvas id="pdf-render"></canvas>
  </div>

  <div class="controls">
    <button id="prev-page">Previous page</button>
    <span id="page-info"></span>
    <button id="next-page">Next page</button>
  </div>

  <script>
    const url = '/devlog-example.pdf'; 

    let pdfDoc = null,
        pageNum = 1,
        pageCount = 0,
        scale = 1.5,
        canvas = document.getElementById('pdf-render'),
        ctx = canvas.getContext('2d');


    pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        pageCount = pdfDoc.numPages;
        document.getElementById('page-info').textContent = `Page ${pageNum} of ${pageCount}`;
        renderPage(pageNum);
    });

    function renderPage(num) {
        pdfDoc.getPage(num).then(function(page) {
            const viewport = page.getViewport({ scale: scale });
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            const renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };

            page.render(renderContext);

            document.getElementById('page-info').textContent = `Page ${num} of ${pageCount}`;
        });
    }

    document.getElementById('prev-page').addEventListener('click', function() {
        if (pageNum <= 1) {
            return;
        }
        pageNum--;
        renderPage(pageNum);
    });

    document.getElementById('next-page').addEventListener('click', function() {
        if (pageNum >= pageCount) {
            return;
        }
        pageNum++;
        renderPage(pageNum);
    });
  </script>
</body>
</html>
